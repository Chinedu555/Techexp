<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Days Calculator</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Animate.css for animations -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <style>
    body {
      --bg-color: #f5f5f5;
      --text-color: #333;
      background: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s, color 0.3s;
      min-height: 100vh;
      display: flex;
      align-items: center;
    }
    [data-bs-theme="dark"] body {
      --bg-color: #212529;
      --text-color: #f8f9fa;
    }
    [data-bs-theme="dark"] .card {
      background-color: #343a40;
      color: #f8f9fa;
    }
    [data-bs-theme="dark"] .form-control,
    [data-bs-theme="dark"] .btn-outline-primary {
      background-color: #495057;
      color: #f8f9fa;
      border-color: #6c757d;
    }
    .counting {
      display: inline-block;
      min-width: 50px; /* Prevents layout shift during counting */
    }
    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
    }
    @media (prefers-reduced-motion: reduce) {
      .animate__animated {
        animation: none !important;
      }
      .counting {
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <!-- Theme Toggle -->
  <div class="theme-toggle">
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" id="themeSwitch" aria-label="Toggle dark mode">
      <label class="form-check-label" for="themeSwitch">
        <i class="bi bi-sun"></i>
      </label>
    </div>
  </div>

  <!-- Main Calculator -->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-6">
        <div class="card shadow p-4">
          <h2 class="display-6 text-center mb-4">Days Calculator</h2>
          <p class="text-muted text-center mb-4">Enter number of days to count from today:</p>
          <div class="input-group mb-3">
            <input type="number" id="daysInput" class="form-control form-control-lg" placeholder="Enter days" aria-label="Number of days" min="1">
            <button class="btn btn-primary" onclick="calculateDate()" id="calculateBtn">Calculate</button>
          </div>
          <div id="result" class="text-center mt-4" aria-live="polite"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS and Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script>
    // Theme Toggle
    const themeSwitch = document.getElementById('themeSwitch');
    const themeIcon = themeSwitch.nextElementSibling.querySelector('i');
    const htmlElement = document.documentElement;

    // Load saved theme from localStorage
    if (localStorage.getItem('theme') === 'dark' || 
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      htmlElement.setAttribute('data-bs-theme', 'dark');
      themeSwitch.checked = true;
      themeIcon.classList.replace('bi-sun', 'bi-moon');
    }

    themeSwitch.addEventListener('change', () => {
      if (themeSwitch.checked) {
        htmlElement.setAttribute('data-bs-theme', 'dark');
        localStorage.setItem('theme', 'dark');
        themeIcon.classList.replace('bi-sun', 'bi-moon');
      } else {
        htmlElement.setAttribute('data-bs-theme', 'light');
        localStorage.setItem('theme', 'light');
        themeIcon.classList.replace('bi-moon', 'bi-sun');
      }
    });

    // Calculate Date with Animation
    function calculateDate() {
      const daysInput = document.getElementById('daysInput');
      const resultDiv = document.getElementById('result');
      const calculateBtn = document.getElementById('calculateBtn');
      let days = daysInput.value;

      // Validation
      if (!days || days < 1) {
        resultDiv.innerHTML = '<div class="alert alert-danger animate__animated animate__fadeIn" role="alert">Please enter a valid number of days.</div>';
        return;
      }

      // Disable button during calculation
      calculateBtn.disabled = true;
      resultDiv.innerHTML = '';

      // Calculate future date
      let today = new Date();
      let futureDate = new Date();
      futureDate.setDate(today.getDate() + parseInt(days));
      let options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      let formatted = futureDate.toLocaleDateString(undefined, options);

      // Counting animation for days
      const daysSpan = document.createElement('span');
      daysSpan.className = 'counting badge bg-primary me-2';
      resultDiv.appendChild(daysSpan);

      let currentCount = 0;
      const targetCount = parseInt(days);
      const increment = targetCount / 50; // Adjust for ~1s animation
      const interval = setInterval(() => {
        currentCount += increment;
        if (currentCount >= targetCount) {
          currentCount = targetCount;
          clearInterval(interval);
          // Enable button after animation
          calculateBtn.disabled = false;
        }
        daysSpan.textContent = Math.floor(currentCount) + ' days';
      }, 20); // 20ms * 50 steps = ~1s

      // Date reveal animation
      const dateSpan = document.createElement('span');
      dateSpan.className = 'animate__animated animate__fadeInUp';
      dateSpan.style.animationDelay = '0.5s';
      dateSpan.innerHTML = `from today is <br><b>${formatted}</b>`;
      resultDiv.appendChild(dateSpan);
    }
  </script>
</body>
</html>
